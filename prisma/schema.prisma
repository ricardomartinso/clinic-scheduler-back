// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id Int @id @default(autoincrement())
  email String @unique
  password String

  @@map("users")
}

model Patient {
  id Int @id @default(autoincrement())
  name String
  email String @unique
  cpf Int @unique
  health_insurance String
  birth_date DateTime @db.Date

  consultations Consultation[]


  phoneId Int
  phone Phone @relation(fields: [phoneId], references: [id])


  addressId Int
  address Address @relation(fields: [addressId], references: [id])

  @@map("patients")
}

model Phone {
  id Int @id @default(autoincrement())
  number BigInt @unique
  patients Patient[]

  @@map("phones")
}

model Address {
  id Int @id @default(autoincrement())
  street String
  street_number Int
  district String
  cep Int
  patients Patient[]

  @@map("address")
}
enum ConsultationTurn {
  manha
  tarde

  @@map("consultation_turn")
}

model Consultation {
  id Int @id @default(autoincrement())
  treatments Treatments[]
  consultation_date DateTime @db.Date
  consultation_turn ConsultationTurn

  patient_id Int
  patient Patient @relation(fields: [patient_id], references: [id])

  @@map("consultations")
}

model Treatments {
  id Int @id @default(autoincrement())
  consultation_id Int
  consultation Consultation @relation(fields: [consultation_id], references: [id])

  @@map("treatments")
}